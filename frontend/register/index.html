<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Register</title>
	<style>
		body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; margin: 0; padding: 0; background: #0b1020; color: #f2f4f8; }
		.container { max-width: 720px; margin: 0 auto; padding: 24px; }
		.card { background: #111833; border: 1px solid #1e2a55; border-radius: 12px; padding: 20px; margin-top: 16px; }
		label { display: block; margin: 8px 0 4px; font-size: 14px; color: #c7d2fe; }
		input { width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: #e5e7eb; }
		button { background: #2563eb; color: white; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer; }
		.row { display: flex; gap: 12px; align-items: center; }
		.row > * { flex: 1; }
		.small { color: #93c5fd; font-size: 12px; }
		a { color: #93c5fd; }
	</style>
</head>
<body>
	<div class="container">
		<h2>Create an account</h2>
		<div class="card">
			<div class="row">
				<div>
					<label>Username</label>
					<input id="username" placeholder="username" />
				</div>
				<div>
					<label>Password</label>
					<input id="password" type="password" placeholder="password" />
				</div>
			</div>
			<div class="row">
				<div>
					<label>Email</label>
					<input id="email" type="email" placeholder="email@example.com" />
				</div>
				<div>
					<label>Phone</label>
					<input id="phone" type="tel" placeholder="+1-555-123-4567" />
				</div>
			</div>
			<div style="margin-top:12px">
				<button id="registerBtn">Register</button>
				<a href="/app/" style="margin-left:8px">Back to Login</a>
				<span id="msg" class="small" style="margin-left:8px"></span>
			</div>
		</div>
	</div>

	<script>
	const $ = (id) => document.getElementById(id);
	$('registerBtn').addEventListener('click', async () => {
		$('registerBtn').disabled = true; $('msg').textContent = 'Registering…';
		try {
			const payload = { username: $('username').value, password: $('password').value, email: $('email').value, phone: $('phone').value };
			const r = await fetch('/auth/register', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
			if (r.status === 409) { $('msg').textContent = 'Username already exists'; return; }
			if (r.status === 400) { $('msg').textContent = 'Missing or invalid fields'; return; }
			if (!r.ok) throw new Error('registration failed');
			$('msg').textContent = 'Registration successful. Redirecting to login…';
			setTimeout(() => { window.location.href = '/app/'; }, 800);
		} catch (e) {
			$('msg').textContent = 'Registration failed';
		} finally {
			$('registerBtn').disabled = false;
		}
	});
	</script>
</body>
</html>


