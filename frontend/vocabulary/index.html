<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vocabulary Module</title>
    <!--
    VOCABULARY MODULE FRONTEND DOCUMENTATION
    ========================================
    
    This file implements the frontend interface for the adaptive vocabulary assessment module.
    It provides a complete vocabulary evaluation system with multiple choice questions,
    adaptive difficulty, and real-time feedback integration with the backend API.
    
    BACKEND API INTEGRATION:
    - POST /auth/token: User authentication
    - POST /vocabulary/start: Initialize new vocabulary session
    - POST /vocabulary/answer: Submit vocabulary answer for evaluation
    - POST /vocabulary/next: Get next question in current session
    - GET /auth/me: Validate current user token
    
    KEY FEATURES:
    - Adaptive difficulty progression based on performance
    - Multiple choice questions with immediate feedback
    - Vocabulary comprehension assessment
    - Session management with progress tracking
    - Guest user support for testing
    
    BROWSER COMPATIBILITY:
    - Modern browsers with ES2020 support
    - Responsive design for mobile and desktop
    
    WORKFLOW:
    1. User logs in (guest/any for testing)
    2. Starts vocabulary session with initial CEFR level
    3. Answers multiple choice vocabulary questions
    4. Receives immediate feedback and adaptive level adjustment
    5. Continues to next question or finishes session
    -->
    
    <!-- Shared CSS -->
    <link rel="stylesheet" href="../build/shared/css/base.css">
    <link rel="stylesheet" href="../build/shared/css/components.css">
    <!-- Module-specific CSS -->
    <link rel="stylesheet" href="../build/vocabulary/styles.css?v=20251013">
    <!-- Shared JavaScript -->
    <script src="../build/shared/js/auth.js?v=20251019"></script>
    <script src="../build/shared/js/api.js?v=20251019"></script>
    <!-- Module-specific JavaScript -->
    <script src="../build/vocabulary/vocabulary.js?v=20251019"></script>
    <link rel="icon" href="data:," />
    <base href="/app/" />
</head>
<body>
    <div class="container">
        <!-- Header with navigation and auth state -->
        <div class="header">
            <h1>Vocabulary Module</h1>
            <div class="small">
                <a href="/app">Home</a> · 
                <span id="authState">Logged out</span> 
                <a href="/app" id="loginLink">Login</a>
            </div>
        </div>

        <!-- Back navigation card -->
        <div class="card">
            <button onclick="window.location.href = '/app/';">← Back</button>
        </div>

        <div id="status" class="small"></div>

        <!-- Login Form -->
        <div id="login-card" class="card">
            <h2>Login</h2>
            <form id="loginForm">
                <div class="row">
                    <div>
                        <label for="username">Username</label>
                        <input id="username" type="text" placeholder="username" value="guest" required>
                    </div>
                    <div>
                        <label for="password">Password</label>
                        <input id="password" type="password" placeholder="password" value="any" required>
                    </div>
                </div>
                <div style="margin-top:12px">
                    <button type="submit">Login</button>
                </div>
            </form>
        </div>

        <!-- Main Interface -->
        <div id="session-card" class="hidden">
            <div class="card">
                <h2>Vocabulary Assessment</h2>
                <p>This assessment will evaluate your vocabulary knowledge through multiple choice questions.</p>
                <p>You will be asked to choose the correct definition for various words. The difficulty will adjust based on your performance.</p>
                
                <div class="vocabulary-level">
                    <span>Starting Level:</span>
                    <span class="level-badge" id="startingLevel">A2</span>
                </div>
                
                <button id="startBtn">Start Vocabulary Assessment</button>
            </div>
        </div>

        <!-- Assessment Interface -->
        <div id="assessment-interface" class="hidden">
            <!-- Progress Display -->
            <div id="progress" class="hidden">
                <!-- Progress will be populated by JavaScript -->
            </div>

            <!-- Vocabulary Question -->
            <div id="question" class="hidden">
                <!-- Question will be populated by JavaScript -->
            </div>

            <!-- Submit Button -->
            <div class="card">
                <button id="submitBtn" disabled>Submit Answer</button>
            </div>

            <!-- Continue Button -->
            <div class="card hidden" id="continueBtn">
                <button onclick="continueToNext()">Continue to Next Question</button>
            </div>
        </div>

        <!-- Results Display -->
        <div id="results" class="hidden">
            <!-- Results will be populated by JavaScript -->
        </div>

    </div>
</body>
</html>